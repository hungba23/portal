(self.webpackChunkdevportal=self.webpackChunkdevportal||[]).push([[9590],{4137:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=o,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2776:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return r},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return c},default:function(){return u}});var a=n(2122),o=n(9756),i=(n(7294),n(4137)),r={id:"minting",title:"Minting Native Assets",sidebar_label:"Minting Native Assets",description:"How to mint native tokens on Cardano.",image:"./img/og-developer-portal.png"},l=void 0,s={unversionedId:"native-tokens/minting",id:"native-tokens/minting",isDocsHomePage:!1,title:"Minting Native Assets",description:"How to mint native tokens on Cardano.",source:"@site/docs/native-tokens/minting.md",sourceDirName:"native-tokens",slug:"/native-tokens/minting",permalink:"/docs/native-tokens/minting",editUrl:"https://github.com/cardano-foundation/developer-portal/edit/staging/docs/native-tokens/minting.md",tags:[],version:"current",lastUpdatedBy:"Tommy",lastUpdatedAt:1632486943,formattedLastUpdatedAt:"9/24/2021",frontMatter:{id:"minting",title:"Minting Native Assets",sidebar_label:"Minting Native Assets",description:"How to mint native tokens on Cardano.",image:"./img/og-developer-portal.png"},sidebar:"someSidebar",previous:{title:"Overview",permalink:"/docs/native-tokens/"},next:{title:"Minting NFTs",permalink:"/docs/native-tokens/minting-nfts"}},c=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Overview",id:"overview",children:[{value:"Directory structure",id:"directory-structure",children:[]},{value:"Token architecture",id:"token-architecture",children:[]}]},{value:"Setup",id:"setup",children:[{value:"Cardano node socket path",id:"cardano-node-socket-path",children:[]},{value:"Improve readability",id:"improve-readability",children:[]},{value:"Check your node status",id:"check-your-node-status",children:[]},{value:"Set up your workspace",id:"set-up-your-workspace",children:[]},{value:"Generate keys and address",id:"generate-keys-and-address",children:[]},{value:"Fund the address",id:"fund-the-address",children:[]},{value:"Export protocol parameters",id:"export-protocol-parameters",children:[]}]},{value:"Minting native assets",id:"minting-native-assets",children:[{value:"Generate the policy",id:"generate-the-policy",children:[]},{value:"Asset minting",id:"asset-minting",children:[]},{value:"Build the raw transaction to send to oneself",id:"build-the-raw-transaction-to-send-to-oneself",children:[]}]},{value:"Sending token to a wallet",id:"sending-token-to-a-wallet",children:[]},{value:"Burning token",id:"burning-token",children:[]}],d={toc:c};function u(e){var t=e.components,r=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In this section, we will be minting native assets - ",(0,i.kt)("strong",{parentName:"p"},"not NFTs"),". "),(0,i.kt)("p",null,"It is strongly advised to work through this section to understand how transactions and minting works.",(0,i.kt)("br",{parentName:"p"}),"\n","Minting NFTs will follow the same process, with only a few tweaks. If you want to jump to NFTs, please visit ",(0,i.kt)("a",{parentName:"p",href:"/docs/native-tokens/minting-nfts"},"Minting NFTs"),"."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"A running and synced Cardano node - accessible through the ",(0,i.kt)("inlineCode",{parentName:"li"},"cardano-cli")," command. This guide is written with ",(0,i.kt)("inlineCode",{parentName:"li"},"cardano-cli")," v 1.27.0. Some commands may be subject to change."),(0,i.kt)("li",{parentName:"ol"},"You have some knowledge in Linux as to navigation between directories, creating and editing files, and setting and inspecting variables via Linux shell.")),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"This tutorial will give you a copy & pastable walk through the complete token lifecycle:"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://ucarecdn.com/75b79657-9f94-41b9-9426-7a65245f14ee/multiassetdiagram.png",alt:"img"})),(0,i.kt)("p",null,"These will be the steps we need to take to complete the whole lifecycle:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Set everything up"),(0,i.kt)("li",{parentName:"ol"},"Build a new address and keys"),(0,i.kt)("li",{parentName:"ol"},"Generate a minting policy"),(0,i.kt)("li",{parentName:"ol"},"Draft a minting transaction"),(0,i.kt)("li",{parentName:"ol"},"Calculate fees"),(0,i.kt)("li",{parentName:"ol"},"Send the transaction and mint tokens (to ourselves)"),(0,i.kt)("li",{parentName:"ol"},"Send the tokens to a Daedalus wallet "),(0,i.kt)("li",{parentName:"ol"},"Burn some token ")),(0,i.kt)("h3",{id:"directory-structure"},"Directory structure"),(0,i.kt)("p",null,"We'll be working in a new directory. Here is an overview of every file we will be generating:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 burning.raw                    # Raw transaction to burn token\n\u251c\u2500\u2500 burning.signed                 # Signed transaction to burn token\n\u251c\u2500\u2500 matx.raw                       # Raw transaction to mint token\n\u251c\u2500\u2500 matx.signed                    # Signed transaction to mint token\n\u251c\u2500\u2500 metadata.json                  # Metadata to specify NFT attributes\n\u251c\u2500\u2500 payment.addr                   # Address to send / receive \n\u251c\u2500\u2500 payment.skey                   # Payment signing key\n\u251c\u2500\u2500 payment.vkey                   # Payment verification key\n\u251c\u2500\u2500 policy                         # Folder which holds everything policy-wise\n\u2502   \u251c\u2500\u2500 policy.script              # Script to genereate the policyID\n\u2502   \u251c\u2500\u2500 policy.skey                # Policy signing key\n\u2502   \u251c\u2500\u2500 policy.vkey                # Policy verification key\n\u2502   \u2514\u2500\u2500 policyID                   # File which holds the policy ID\n\u2514\u2500\u2500 protocol.json                  # Protocol parameters\n")),(0,i.kt)("h3",{id:"token-architecture"},"Token architecture"),(0,i.kt)("p",null,"Before minting native assets, you need to ask yourself at least those four questions:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"What will be the name of my custom token(s)?"),(0,i.kt)("li",{parentName:"ol"},"How many do I want to mint?"),(0,i.kt)("li",{parentName:"ol"},"Will there be a time constraint for interaction (minting or burning token?)"),(0,i.kt)("li",{parentName:"ol"},"Who should be able to mint them?")),(0,i.kt)("p",null,"Number 1, 3, and 4 will be defined in a so-called monetary policy script, whereas the actual amount will only be defined on the minting transaction."),(0,i.kt)("p",null,"For this guide, we will use:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"What will be the name of my custom token(s)?",(0,i.kt)("br",{parentName:"li"}),"--\x3e We are going to call ",(0,i.kt)("inlineCode",{parentName:"li"},"Testtoken")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"SecondTesttoken")),(0,i.kt)("li",{parentName:"ol"},"How many do I want to mint?",(0,i.kt)("br",{parentName:"li"}),"--\x3e 10000000 each (10M ",(0,i.kt)("inlineCode",{parentName:"li"},"Testtoken")," and 10M ",(0,i.kt)("inlineCode",{parentName:"li"},"SecondTesttoken"),")"),(0,i.kt)("li",{parentName:"ol"},"Will there be a time constraint for interaction (minting or burning token?)",(0,i.kt)("br",{parentName:"li"}),"---\x3e No (we will, however, when making NFTs), we want to mint and burn them however we like."),(0,i.kt)("li",{parentName:"ol"},"Who should be able to mint them?",(0,i.kt)("br",{parentName:"li"}),"--\x3e only one signature (which we possess) should be able to sign the transaction and therefore be able to mint the token")),(0,i.kt)("h2",{id:"setup"},"Setup"),(0,i.kt)("h3",{id:"cardano-node-socket-path"},"Cardano node socket path"),(0,i.kt)("p",null,"To work with the ",(0,i.kt)("inlineCode",{parentName:"p"},"cardano-cli")," we need to export an environment variable called ",(0,i.kt)("inlineCode",{parentName:"p"},"CARDANO_NODE_SOCKET_PATH"),". Please note that the variable name is all uppercase.\nThe variable needs to hold the absolute path to the socket file of your running Cardano node installation."),(0,i.kt)("p",null,"If you're unsure or do not know where to find your socket path, please check the command on how you start/run your Cardano node.",(0,i.kt)("br",{parentName:"p"}),"\n","For example - if you start your node with this command"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"/home/user/.local/bin/cardano-node run \\\n --topology config/testnet-topology.json \\\n --database-path db \\\n --socket-path /home/user/TESTNET_NODE/socket/node.socket \\\n --port 3001 \\\n --config config/testnet-config.json\n")),(0,i.kt)("p",null,"You need to set the variable to the corresponding path of the ",(0,i.kt)("inlineCode",{parentName:"p"},"--socket-path")," parameter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'export CARDANO_NODE_SOCKET_PATH="/home/user/TESTNET_NODE/socket/node.socket"\n')),(0,i.kt)("p",null,"You need to adjust the path on your setup and your socket path accordingly."),(0,i.kt)("h3",{id:"improve-readability"},"Improve readability"),(0,i.kt)("p",null,"Since we've already answered all of the questions above, we will set variables on our terminal/bash to make readability a bit easier.\nWe also will be using the testnet. The only difference between minting native assets in the mainnet will be that you need to substitute the network variable ",(0,i.kt)("i",null,"testnet")," with mainnet."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'testnet="testnet-magic 1097911063"\ntokenname1="Testtoken"\ntokenname2="SecondTesttoken"\ntokenamount="10000000"\noutput="0"\n')),(0,i.kt)("p",null,"We will be using this technique of setting variables along the way to make it easier to follow along."),(0,i.kt)("h3",{id:"check-your-node-status"},"Check your node status"),(0,i.kt)("p",null,"We also want to check if our Node is up to date. To do that, we check the current epoch/block and compare it to the current value displayed in the ",(0,i.kt)("a",{parentName:"p",href:"https://explorer.cardano-testnet.iohkdev.io/en"},"Cardano Explorer for the testnet"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli query tip --$testnet\n")),(0,i.kt)("p",null,"Should give you an output like this"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'{\n    "epoch": 282,\n    "hash": "82cfbbadaaec1a6204442b91de1535505b6482ae9858f3f0bd9c4bb9c8a2c12b",\n    "slot": 36723570,\n    "block": 6078639,\n    "era": "Mary"\n}\n')),(0,i.kt)("p",null,"Epoch and slot number should match when being compared to the Cardano ",(0,i.kt)("a",{parentName:"p",href:"https://explorer.cardano-testnet.iohkdev.io/en"},"Explorer for testnet")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(6441).Z})),(0,i.kt)("h3",{id:"set-up-your-workspace"},"Set up your workspace"),(0,i.kt)("p",null,"We will start with a clean slate. So let's make a new directory and navigate into it."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir tokens\ncd tokens/\n")),(0,i.kt)("h3",{id:"generate-keys-and-address"},"Generate keys and address"),(0,i.kt)("p",null,"If you already have a payment address and keys and you want to use those, you can skip this step.",(0,i.kt)("br",{parentName:"p"}),"\n","If not - we need to generate those to submit transactions and to send and receive ada or native assets."),(0,i.kt)("p",null,"Payment verification and signing keys are the first keys we need to create."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli address key-gen --verification-key-file payment.vkey --signing-key-file payment.skey\n")),(0,i.kt)("p",null,"Those two keys can now be used to generate an address."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli address build --payment-verification-key-file payment.vkey --out-file payment.addr --$testnet\n")),(0,i.kt)("p",null,"We will save our address hash in a variable called ",(0,i.kt)("inlineCode",{parentName:"p"},"address"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"address=$(cat payment.addr)\n")),(0,i.kt)("h3",{id:"fund-the-address"},"Fund the address"),(0,i.kt)("p",null,"Submitting transactions always require you to pay a fee. Sending native assets requires also requires sending at least 1 ada.",(0,i.kt)("br",{parentName:"p"}),"\n","So make sure the address you are going to use as the input for the minting transaction has sufficient funds. "),(0,i.kt)("p",null,"For the ",(0,i.kt)("strong",{parentName:"p"},"testnet"),", you can request funds through the ",(0,i.kt)("a",{parentName:"p",href:"../integrate-cardano/testnet-faucet"},"testnet faucet"),"."),(0,i.kt)("h3",{id:"export-protocol-parameters"},"Export protocol parameters"),(0,i.kt)("p",null,"For our transaction calculations, we need some of the current protocol parameters. The parameters can be saved in a file called ",(0,i.kt)("i",null,"protocol.json")," with this command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli query protocol-parameters --$testnet --out-file protocol.json\n")),(0,i.kt)("h2",{id:"minting-native-assets"},"Minting native assets"),(0,i.kt)("h3",{id:"generate-the-policy"},"Generate the policy"),(0,i.kt)("p",null,"Policies are the defining factor under which tokens can be minted. Only those in possession of the policy keys can mint or burn tokens minted under this specific policy.\nWe'll make a separate sub-directory in our work directory to keep everything policy-wise separated and more organized.\nFor further reading, please check ",(0,i.kt)("a",{parentName:"p",href:"https://docs.cardano.org/native-tokens/getting-started/#tokenmintingpolicies"},"the official docs")," or the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-node/blob/c6b574229f76627a058a7e559599d2fc3f40575d/doc/reference/simple-scripts.md"},"github page about multi-signature scripts"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir policy\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"We don't navigate into this directory, and everything is done from our working directory."))),(0,i.kt)("p",null,"First of all, we \u2014 again \u2014 need some key pairs:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli address key-gen \\\n    --verification-key-file policy/policy.vkey \\\n    --signing-key-file policy/policy.skey\n")),(0,i.kt)("p",null,"Create a ",(0,i.kt)("inlineCode",{parentName:"p"},"policy.script")," file and fill it with an empty string."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'touch policy/policy.script && echo "" > policy/policy.script\n')),(0,i.kt)("p",null,"Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"echo")," command to populate the file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'echo "{" >> policy/policy.script \necho "  \\"keyHash\\": \\"$(cardano-cli address key-hash --payment-verification-key-file policy/policy.vkey)\\"," >> policy/policy.script \necho "  \\"type\\": \\"sig\\"" >> policy/policy.script \necho "}" >> policy/policy.script\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The second echo uses a sub-shell command to generate the so-called key-hash. But, of course, you could also do that by hand."))),(0,i.kt)("p",null,"We now have a simple script file that defines the policy verification key as a witness to sign the minting transaction. There are no further constraints such as token locking or requiring specific signatures to successfully submit a transaction with this minting policy."),(0,i.kt)("h3",{id:"asset-minting"},"Asset minting"),(0,i.kt)("p",null,"To mint the native assets, we need to generate the policy ID from the script file we created."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction policyid --script-file ./policy/policy.script >> policy/policyID\n")),(0,i.kt)("p",null,"The output gets saved to the file ",(0,i.kt)("inlineCode",{parentName:"p"},"policyID")," as we need to reference it later on."),(0,i.kt)("h3",{id:"build-the-raw-transaction-to-send-to-oneself"},"Build the raw transaction to send to oneself"),(0,i.kt)("p",null,"To mint the tokens, we will make a transaction using our previously generated and funded address."),(0,i.kt)("h4",{id:"a-quick-word-about-transactions-in-cardano"},"A quick word about transactions in Cardano"),(0,i.kt)("p",null,"Each transaction in Cardano requires the payment of a fee which \u2014 as of now \u2014 will mostly be determined by the size of what we want to transmit.\nThe more bytes get sent, the higher the fee."),(0,i.kt)("p",null,"That's why making a transaction in Cardano is a three-way process."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"First, we will build a transaction, resulting in a file. This will be the foundation of how the transaction fee will be calculated. "),(0,i.kt)("li",{parentName:"ol"},"We use this ",(0,i.kt)("inlineCode",{parentName:"li"},"raw")," file and our protocol parameters to calculate our fees"),(0,i.kt)("li",{parentName:"ol"},"Then we need to re-build the transaction, including the correct fee and the adjusted amount we're able to send. Since we send it to ourselves, the output needs to be the amount of our fundings minus the calculated fee.")),(0,i.kt)("p",null,'Another thing to keep in mind is the model of how transactions and "balances" are designed in Cardano.\nEach transaction has one (or multiple) inputs (the source of your funds, like which bill you\'d like to use in your wallet to pay) and one or multiple outputs.\nIn our minting example, the input and output will be the same - ',(0,i.kt)("b",null,"our own address"),"."),(0,i.kt)("p",null,"Before we start, we will again need some setup to make the transaction building easier.\nFirst, query your payment address and take note of the different values present."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli query utxo --address $address --$testnet\n")),(0,i.kt)("p",null,"Your output should look something like this (fictional example):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"                           TxHash                                 TxIx        Amount\n--------------------------------------------------------------------------------------\nb35a4ba9ef3ce21adcd6879d08553642224304704d206c74d3ffb3e6eed3ca28     0        1000000000 lovelace\n")),(0,i.kt)("p",null,"Since we need each of those values in our transaction, we will store them individually in a corresponding variable."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'txhash="insert your txhash here"\ntxix="insert your TxIx here"\nfunds="insert Amount here"\npolicyid=$(cat policy/policyID)\n')),(0,i.kt)("p",null,"For our fictional example, this would result in the following output - ",(0,i.kt)("b",null,"please adjust your values accordingly"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ txhash="b35a4ba9ef3ce21adcd6879d08553642224304704d206c74d3ffb3e6eed3ca28"\n$ txix="0"\n$ funds="1000000000"\n$ policyid=$(cat policy/policyID)\n')),(0,i.kt)("p",null,"Also, transactions only used to calculate fees must still have a fee set, though it doesn't have to be exact.  The calculated fee will be included ",(0,i.kt)("em",{parentName:"p"},"the second time")," this transaction is built (i.e. the transaction to sign and submit).  This first time, only the fee parameter ",(0,i.kt)("em",{parentName:"p"},"length")," matters, so here we choose a maximum value (",(0,i.kt)("a",{parentName:"p",href:"https://github.com/cardano-foundation/developer-portal/pull/283#discussion_r705612888"},"note"),"): "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ fee="300000"\n')),(0,i.kt)("p",null,"Now we are ready to build the first transaction to calculate our fee and save it in a file called ",(0,i.kt)("i",null,"matx.raw"),".\nWe will reference the variables in our transaction to improve readability because we saved almost all of the needed values in variables.\nThis is what our transaction looks like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'cardano-cli transaction build-raw \\\n --fee $fee \\\n --tx-in $txhash#$txix \\\n --tx-out $address+$output+"$tokenamount $policyid.$tokenname1 + $tokenamount $policyid.$tokenname2" \\\n --mint="$tokenamount $policyid.$tokenname1 + $tokenamount $policyid.$tokenname2" \\\n --minting-script-file policy/policy.script \\\n --out-file matx.raw\n')),(0,i.kt)("h4",{id:"syntax-breakdown"},"Syntax breakdown"),(0,i.kt)("p",null,"Here's a breakdown of the syntax as to which parameters we define in our minting transaction:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"--fee: $fee\n")),(0,i.kt)("p",null,"The network fee we need to pay for our transaction. Fees will be calculated through the network parameters and depending on the size (in bytes) our transaction will have. The bigger the file size, the higher the fee."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"--tx-in $txhash#$txix \\\n")),(0,i.kt)("p",null,"The hash of our address we use as the input for the transaction needs sufficient funds.\nSo the syntax is: the hash, followed by a hashtag, followed by the value of TxIx of the corresponding hash."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'--tx-out $address+$output+"$tokenamount $policyid.$tokenname1 + $tokenamount $policyid.$tokenname2" \\\n')),(0,i.kt)("p",null,"Here is where part one of the magic happens. For the ",(0,i.kt)("i",null,"--tx-out"),", we need to specify which address will receive our transaction.\nIn our case, we send the tokens to our own address. "),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The syntax is very important, so here it is word for word. There are no spaces unless explicitly stated:"),(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},"address hash"),(0,i.kt)("li",{parentName:"ol"},"a plus sign"),(0,i.kt)("li",{parentName:"ol"},"the output in Lovelace (ada) (output = input amount \u2014 fee)"),(0,i.kt)("li",{parentName:"ol"},"a plus sign"),(0,i.kt)("li",{parentName:"ol"},"quotation marks"),(0,i.kt)("li",{parentName:"ol"},"the amount of the token"),(0,i.kt)("li",{parentName:"ol"},"a blank/space"),(0,i.kt)("li",{parentName:"ol"},"the policy id"),(0,i.kt)("li",{parentName:"ol"},"a dot"),(0,i.kt)("li",{parentName:"ol"},"the token name (optional if you want multiple/different tokens: a blank, a plus, a blank, and start over at 6.) "),(0,i.kt)("li",{parentName:"ol"},"quotation marks")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'--mint="$tokenamount $policyid.$tokenname1 + $tokenamount $policyid.$tokenname2" \\\n')),(0,i.kt)("p",null,"Again, the same syntax as specified in ",(0,i.kt)("i",null,"--tx-out")," but without the address and output."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"--out-file matx.raw\n")),(0,i.kt)("p",null,"We save our transaction to a file that you can name however you want.\nJust be sure to reference the correct filename in upcoming commands. I chose to stick with the official docs and declared it as ",(0,i.kt)("i",null,"matx.raw"),"."),(0,i.kt)("p",null,"Based on this raw transaction we can calculate the minimal transaction fee and store it in the variable ",(0,i.kt)("i",null,"$fee"),". We get a bit fancy here and only store the value so we can use the variable for terminal based calculations:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'fee=$(cardano-cli transaction calculate-min-fee --tx-body-file matx.raw --tx-in-count 1 --tx-out-count 1 --witness-count 1 --$testnet --protocol-params-file protocol.json | cut -d " " -f1)\n')),(0,i.kt)("p",null,"Remember, the transaction input and the output of ada must be equal, or otherwise, the transaction will fail. There can be no leftovers.\nTo calculate the remaining output wee need to subtract the fee from our funds and save the result in our output variable."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"output=$(expr $funds - $fee)\n")),(0,i.kt)("p",null,"We now have every value we need to re-build the transaction, ready to be signed. So we reissue the same command to re-buld, the only difference being our variables now holding the correct values."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'cardano-cli transaction build-raw \\\n--fee $fee  \\\n--tx-in $txhash#$txix  \\\n--tx-out $address+$output+"$tokenamount $policyid.$tokenname1 + $tokenamount $policyid.$tokenname2" \\\n--mint="$tokenamount $policyid.$tokenname1 + $tokenamount $policyid.$tokenname2" \\\n--minting-script-file policy/policy.script \\\n--out-file matx.raw\n')),(0,i.kt)("p",null,"Transactions need to be signed to prove the authenticity and ownership of the policy key."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction sign  \\\n--signing-key-file payment.skey  \\\n--signing-key-file policy/policy.skey  \\\n--$testnet --tx-body-file matx.raw  \\\n--out-file matx.signed\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"The signed transaction will be saved in a new file called ",(0,i.kt)("i",null,"matx.signed")," instead of ",(0,i.kt)("i",null,"matx.raw"),".")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"})),(0,i.kt)("p",null,"Now we are going to submit the transaction, therefore minting our native assets:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction submit --tx-file matx.signed --$testnet\n")),(0,i.kt)("p",null,"Congratulations, we have now successfully minted our own token.\nAfter a couple of seconds, we can check the output address"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli query utxo --address $address --$testnet\n")),(0,i.kt)("p",null,"and should see something like this (fictional example):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"                           TxHash                                 TxIx        Amount\n--------------------------------------------------------------------------------------\nd82e82776b3588c1a2c75245a20a9703f971145d1ca9fba4ad11f50803a43190     0        999824071 lovelace + 10000000 45fb072eb2d45b8be940c13d1f235fa5a8263fc8ebe8c1af5194ea9c.SecondTesttoken + 10000000 45fb072eb2d45b8be940c13d1f235fa5a8263fc8ebe8c1af5194ea9c.Testtoken\n")),(0,i.kt)("h2",{id:"sending-token-to-a-wallet"},"Sending token to a wallet"),(0,i.kt)("p",null,"To send tokens to a wallet, we need to build another transaction - this time only without the minting parameter.\nWe will set up our variables accordingly."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'fee="0"\nreceiver="Insert wallet address here"\nreceiver_output="10000000"\ntxhash=""\ntxix=""\nfunds="Amout of lovelace"\n')),(0,i.kt)("p",null,"Again - here is an example of how it would look if we use our fictional example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ fee="0"\n$ receiver="addr_test1qp0al5v8mvwv9mzn77ls0tev3t838yp9ghvgxf9t5qa4sqlua2ywcygl3d356c34576elq5mcacg88gaevceyc5tulwsmk7s8v"\n$ receiver_output="10000000"\n$ txhash="d82e82776b3588c1a2c75245a20a9703f971145d1ca9fba4ad11f50803a43190"\n$ txix="0"\n$ funds="999824071"\n')),(0,i.kt)("p",null,"You should still have access to the other variables from the minting process.\nPlease check if those variables are set:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"echo Tokenname 1: $tokenname1\necho Tokenname 2: $tokenname2\necho Address: $address\necho Policy ID: $policyid\n")),(0,i.kt)("p",null,"We will be sending 2 of our first tokens, ",(0,i.kt)("inlineCode",{parentName:"p"},"Testtoken"),", to the foreign address.",(0,i.kt)("br",{parentName:"p"}),"\n","A few things worth pointing out:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"We are forced to send at least a minimum of 1 ada (1000000 Lovelace) to the foreign address. We can not send tokens only. So we need to factor this value into our output. We will reference the output value of the remote address with the variable receiver_output."),(0,i.kt)("li",{parentName:"ol"},"Apart from the receiving address, we also need to set our own address as an additional output. Since we don't want to send everything we have to the remote address, we're going to use our own address to receive everything else coming from the input."),(0,i.kt)("li",{parentName:"ol"},"Our own address, therefore, needs to receive our funds, subtracted by the transaction fee as well as the minimum of 1 ada we need to send to the other address and"),(0,i.kt)("li",{parentName:"ol"},"all of the tokens the txhash currently holds, subtracted by the tokens we send.")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Depending on the size and amount of native assets you are going to send it might be possible to send more than the minimum requirement of only 1 ada. For this guide, we will be sending 10 ada to be on the safe side.")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Check the ",(0,i.kt)("a",{parentName:"p",href:"https://cardano-ledger.readthedocs.io/en/latest/explanations/min-utxo.html#min-ada-value-calculation"},"Cardano ledger docs for further reading")))),(0,i.kt)("p",null,"Since we will send 2 of our first tokens to the remote address we are left with 999998 of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Testtoken")," as well as the additional 1000000 ",(0,i.kt)("inlineCode",{parentName:"p"},"SecondTesttoken"),"."),(0,i.kt)("p",null,"Here\u2019s what the ",(0,i.kt)("inlineCode",{parentName:"p"},"raw")," transaction looks like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'cardano-cli transaction build-raw  \\\n--fee $fee  \\\n--tx-in $txhash#$txix  \\\n--tx-out $receiver+$receiver_output+"2 $policyid.$tokenname1"  \\\n--tx-out $address+$output+"9999998 $policyid.$tokenname1 + 10000000 $policyid.$tokenname2"  \\\n--out-file rec_matx.raw\n')),(0,i.kt)("p",null,"Again we are going to calculate the fee and save it in a variable."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'fee=$(cardano-cli transaction calculate-min-fee --tx-body-file rec_matx.raw --tx-in-count 1 --tx-out-count 2 --witness-count 1 --$testnet --protocol-params-file protocol.json | cut -d " " -f1)\n')),(0,i.kt)("p",null,"As stated above, we need to calculate the leftovers that will get sent back to our address.\nThe logic being:\n",(0,i.kt)("inlineCode",{parentName:"p"},"TxHash Amout")," \u2014 ",(0,i.kt)("inlineCode",{parentName:"p"},"fee")," \u2014 ",(0,i.kt)("inlineCode",{parentName:"p"},"min Send 10 ada in Lovelace")," = ",(0,i.kt)("inlineCode",{parentName:"p"},"the output for our own address")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"output=$(expr $funds - $fee - 10000000)\n")),(0,i.kt)("p",null,"Let\u2019s update the transaction:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'cardano-cli transaction build-raw  \\\n--fee $fee  \\\n--tx-in $txhash#$txix  \\\n--tx-out $receiver+$receiver_output+"2 $policyid.$tokenname1"  \\\n--tx-out $address+$output+"9999998 $policyid.$tokenname1 + 10000000 $policyid.$tokenname2"  \\\n--out-file rec_matx.raw\n')),(0,i.kt)("p",null,"Sign it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction sign --signing-key-file payment.skey --$testnet --tx-body-file rec_matx.raw --out-file rec_matx.signed\n")),(0,i.kt)("p",null,"Send it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction submit --tx-file rec_matx.signed --$testnet\n")),(0,i.kt)("p",null,"After a few seconds, you, the receiver, should have your tokens. For this example, a Daedalus testnet wallet is used."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(4673).Z})),(0,i.kt)("h2",{id:"burning-token"},"Burning token"),(0,i.kt)("p",null,"In the last part of our token lifecycle, we will burn 5000 of our newly made tokens ",(0,i.kt)("i",null,"SecondTesttoken"),", thereby destroying them permanently."),(0,i.kt)("p",null,"You won't be surprised that this \u2014 again \u2014 will be done with a transaction.\nIf you've followed this guide up to this point, you should be familiar with the process, so let's start over."),(0,i.kt)("p",null,"Set everything up and check our address:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli query utxo --address $address --$testnet\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Since we've already sent tokens away, we need to adjust the amount of Testtoken we are going to send.")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"})),(0,i.kt)("p",null,"Let's set our variables accordingly (if not already set). Variables like address and the token names should also be set."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'txhash="insert your txhash here"\ntxix="insert your TxIx here"\nfunds="insert Amount only in here"\nburnfee="0"\npolicyid=$(cat policy/policyID)\nburnoutput="0"\n')),(0,i.kt)("p",null,"Burning tokens is fairly straightforward.\nYou will issue a new minting action, but this time with a ",(0,i.kt)("b",null,"negative")," input. This will essentially subtract the amount of token."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'cardano-cli transaction build-raw \\\n --fee $burnfee \\\n --tx-in $txhash#$txix \\\n --tx-out $address+$burnoutput+"9999998 $policyid.$tokenname1 + 9995000 $policyid.$tokenname2"  \\\n --mint="-5000 $policyid.$tokenname2" \\\n --minting-script-file policy/policy.script \\\n --out-file burning.raw\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Since we already have multiple transaction files, we will give this transaction a better name and call it ",(0,i.kt)("i",null,"burning.raw"),".")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"We also need to specify the amount of tokens left after destroying.\nThe math is:"),(0,i.kt)("i",null,"amount of input token")," \u2014 ",(0,i.kt)("i",null,"amount of destroyed token")," = ",(0,i.kt)("i",null,"amount of output token"))),(0,i.kt)("p",null,"As usual, we need to calculate the fee.\nTo make a better differentiation, we named the variable ",(0,i.kt)("i",null,"burnfee"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'burnfee=$(cardano-cli transaction calculate-min-fee --tx-body-file burning.raw --tx-in-count 1 --tx-out-count 1 --witness-count 1 --$testnet --protocol-params-file protocol.json | cut -d " " -f1)\n')),(0,i.kt)("p",null,"Calculate the correct output value"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"burnoutput=$(expr $funds - $burnfee)\n")),(0,i.kt)("p",null,"Re-build the transaction with the correct amounts"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'cardano-cli transaction build-raw \\\n --fee $burnfee \\\n --tx-in $txhash#$txix \\\n --tx-out $address+$burnoutput+"9999998 $policyid.$tokenname1 + 9995000 $policyid.$tokenname2"  \\\n --mint="-5000 $policyid.$tokenname2" \\\n --minting-script-file policy/policy.script \\\n --out-file burning.raw\n')),(0,i.kt)("p",null," Sign the transaction:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction sign  \\\n--signing-key-file payment.skey  \\\n--signing-key-file policy/policy.skey  \\\n--$testnet  \\\n--tx-body-file burning.raw  \\\n--out-file burning.signed\n")),(0,i.kt)("p",null,"Send it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli transaction submit --tx-file burning.signed --$testnet\n")),(0,i.kt)("p",null,"Check your address: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-cli query utxo --address $address --$testnet\n")),(0,i.kt)("p",null,"You should now have 5000 tokens less than before:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"                           TxHash                                 TxIx        Amount\n--------------------------------------------------------------------------------------\nf56e2800b7b5980de6a57ebade086a54aaf0457ec517e13012571b712cf53fb3     1        989643170 lovelace + 10000000 45fb072eb2d45b8be940c13d1f235fa5a8263fc8ebe8c1af5194ea9c.SecondTesttoken + 9999998 45fb072eb2d45b8be940c13d1f235fa5a8263fc8ebe8c1af5194ea9c.Testtoken\n")))}u.isMDXComponent=!0},6441:function(e,t,n){"use strict";t.Z=n.p+"assets/images/cardano_explorer_testnet-6dd2fd2f53607ba0e81cbe0e0f7c14ca.png"},4673:function(e,t,n){"use strict";t.Z=n.p+"assets/images/daedalus_tokens_rec-4fcd849d35dec1207843b319292eeb89.PNG"}}]);