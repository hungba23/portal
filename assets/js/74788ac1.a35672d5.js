(self.webpackChunkdevportal=self.webpackChunkdevportal||[]).push([[2103],{4137:function(e,n,t){"use strict";t.d(n,{Zo:function(){return l},kt:function(){return m}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=a.createContext({}),p=function(e){var n=a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l=function(e){var n=p(e.components);return a.createElement(d.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,d=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=p(t),m=o,k=h["".concat(d,".").concat(m)]||h[m]||c[m]||r;return t?a.createElement(k,i(i({ref:n},l),{},{components:t})):a.createElement(k,i({ref:n},l))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=h;var s={};for(var d in n)hasOwnProperty.call(n,d)&&(s[d]=n[d]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},4606:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return p},default:function(){return c}});var a=t(2122),o=t(9756),r=(t(7294),t(4137)),i={id:"running-cardano",title:"How to run cardano-node",sidebar_label:"Running cardano-node",description:"This guide will explain and show you how to run the cardano-node and components on your system.",image:"./img/og-developer-portal.png"},s=void 0,d={unversionedId:"get-started/running-cardano",id:"get-started/running-cardano",isDocsHomePage:!1,title:"How to run cardano-node",description:"This guide will explain and show you how to run the cardano-node and components on your system.",source:"@site/docs/get-started/running-cardano.md",sourceDirName:"get-started",slug:"/get-started/running-cardano",permalink:"/docs/get-started/running-cardano",editUrl:"https://github.com/cardano-foundation/developer-portal/edit/staging/docs/get-started/running-cardano.md",tags:[],version:"current",lastUpdatedBy:"Tommy",lastUpdatedAt:1632486943,formattedLastUpdatedAt:"9/24/2021",frontMatter:{id:"running-cardano",title:"How to run cardano-node",sidebar_label:"Running cardano-node",description:"This guide will explain and show you how to run the cardano-node and components on your system.",image:"./img/og-developer-portal.png"},sidebar:"someSidebar",previous:{title:"Installing cardano-node",permalink:"/docs/get-started/installing-cardano-node"},next:{title:"Installing cardano-wallet",permalink:"/docs/get-started/installing-cardano-wallet"}},p=[{value:"Overview",id:"overview",children:[]},{value:"Configuration Files",id:"configuration-files",children:[]},{value:"Running the node",id:"running-the-node",children:[]},{value:"cardano-node parameters",id:"cardano-node-parameters",children:[]},{value:"Querying the Cardano Blockchain",id:"querying-the-cardano-blockchain",children:[]}],l={toc:p};function c(e){var n=e.components,i=(0,o.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},l,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This guide will show you how to run ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli")," on your system and some simple examples of how you can interact with the ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," blockchain."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This guide assumes you installed ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli")," into your system. If not, you can refer to ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/installing-cardano-node"},"Installing cardano-node")," guide for instructions on how to do that."))),(0,r.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This guide does not cover the topic of running a block-producing ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," or running a ",(0,r.kt)("strong",{parentName:"p"},"Cardano Stake Pool"),". For more information regarding that topic, please visit the ",(0,r.kt)("a",{parentName:"p",href:"/docs/operate-a-stake-pool/"},"Stake Pool Operation")," section."))),(0,r.kt)("h3",{id:"configuration-files"},"Configuration Files"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," application requires at least four configuration files to run as of writing this article."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Main Config"),": It contains general node settings such as ",(0,r.kt)("strong",{parentName:"li"},"logging")," and ",(0,r.kt)("strong",{parentName:"li"},"versioning"),". It also points to the ",(0,r.kt)("strong",{parentName:"li"},"Byron Genesis")," and the ",(0,r.kt)("strong",{parentName:"li"},"Shelly Genesis")," file."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Byron Genesis"),": It contains the initial protocol parameters and instructs the ",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-node")," on how to bootstrap the ",(0,r.kt)("strong",{parentName:"li"},"Byron Era")," of the ",(0,r.kt)("strong",{parentName:"li"},"Cardano")," blockchain."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Shelly Genesis"),": It contains the initial protocol parameters and instructs the ",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-node")," on how to bootstrap the ",(0,r.kt)("strong",{parentName:"li"},"Shelly Era")," of the ",(0,r.kt)("strong",{parentName:"li"},"Cardano")," blockchain."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Alonzo Genesis"),": It contains the initial protocol parameters and instructs the ",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-node")," on how to bootstrap the ",(0,r.kt)("strong",{parentName:"li"},"Shelly Era")," of the ",(0,r.kt)("strong",{parentName:"li"},"Cardano")," blockchain."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Topology"),": It contains the list of network peers (",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"IP Address")," and ",(0,r.kt)("inlineCode",{parentName:"strong"},"Port")," of other nodes running the blockchain network"),") that your node will connect to.")),(0,r.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Currently, the ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," topology is manually set by the community of network operators in the ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," blockchain. But an automated p2p (peer-to-peer) system is in the works. For more information visit, ",(0,r.kt)("a",{parentName:"p",href:"https://iohk.io/en/blog/posts/2021/04/06/boosting-network-decentralization-with-p2p/"},"Boosting network decentralization with P2P"),"."),(0,r.kt)("p",{parentName:"div"},"For more information about ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," blockchain eras and upgrades, please visit the ",(0,r.kt)("a",{parentName:"p",href:"https://roadmap.cardano.org/en"},"Cardano Roadmap"),"."))),(0,r.kt)("p",null,"You can obtain the current ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," blockchain network configuration files here: "),(0,r.kt)("h4",{id:"mainnet--production"},"Mainnet / Production"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NetworkMagic"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"764824073")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://hydra.iohk.io/build/7370192/download/1/mainnet-config.json\nhttps://hydra.iohk.io/build/7370192/download/1/mainnet-byron-genesis.json\nhttps://hydra.iohk.io/build/7370192/download/1/mainnet-shelley-genesis.json\nhttps://hydra.iohk.io/build/7370192/download/1/mainnet-alonzo-genesis.json\nhttps://hydra.iohk.io/build/7370192/download/1/mainnet-topology.json\n")),(0,r.kt)("h4",{id:"testnet--sandbox"},"Testnet / Sandbox"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NetworkMagic"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"1097911063")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://hydra.iohk.io/job/Cardano/cardano-node/cardano-deployment/latest-finished/download/1/testnet-config.json\nhttps://hydra.iohk.io/job/Cardano/cardano-node/cardano-deployment/latest-finished/download/1/testnet-byron-genesis.json\nhttps://hydra.iohk.io/job/Cardano/cardano-node/cardano-deployment/latest-finished/download/1/testnet-shelley-genesis.json\nhttps://hydra.iohk.io/job/Cardano/cardano-node/cardano-deployment/latest-finished/download/1/testnet-alonzo-genesis.json\nhttps://hydra.iohk.io/job/Cardano/cardano-node/cardano-deployment/latest-finished/download/1/testnet-topology.json\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Each network has a ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," file, ",(0,r.kt)("inlineCode",{parentName:"p"},"genesis")," file(s), ",(0,r.kt)("inlineCode",{parentName:"p"},"topology")," file, and unique identifier called the ",(0,r.kt)("strong",{parentName:"p"},"Network Magic"),"."),(0,r.kt)("p",{parentName:"div"},"This section will be updated when new ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," networks come online with their respective configuration files and ",(0,r.kt)("strong",{parentName:"p"},"Network Magic"),"."))),(0,r.kt)("p",null,"You might be asking what the difference is between ",(0,r.kt)("inlineCode",{parentName:"p"},"mainnet")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"testnet")," and why there are two networks? To put it simply, ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," is an open-source blockchain, and anyone is free to spin up a network based on ",(0,r.kt)("strong",{parentName:"p"},"Cardano's")," software components. The ",(0,r.kt)("inlineCode",{parentName:"p"},"mainnet")," network was the first one established during the start of the ",(0,r.kt)("strong",{parentName:"p"},"Byron")," era in 2017.  And everyone participating in the network agreed that is where all the real value of ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," lives."),(0,r.kt)("p",null," Testing the network's features and capabilities can be expensive and will consume real value. So ",(0,r.kt)("a",{parentName:"p",href:"https://iohk.io"},"Input-Output Global")," has spun up a sandbox or testnet version of the network. Instead of using real ",(0,r.kt)("inlineCode",{parentName:"p"},"ada")," tokens for transactions, you use the ",(0,r.kt)("inlineCode",{parentName:"p"},"tAda")," or ",(0,r.kt)("strong",{parentName:"p"},"Test ADA"),". Alternatively, you can spin up your own custom ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," network, but that is outside the scope of this guide."),(0,r.kt)("h3",{id:"running-the-node"},"Running the node"),(0,r.kt)("p",null,"To run ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," you enter something like this into the terminal: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"}," cardano-node run \\\n   --topology path/to/mainnet-topology.json \\\n   --database-path path/to/db \\\n   --socket-path path/to/db/node.socket \\\n   --host-addr x.x.x.x \\\n   --port 3001 \\\n   --config path/to/mainnet-config.json\n")),(0,r.kt)("p",null,"To get the complete list of available options, use ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node run --help")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Usage: cardano-node run [--topology FILEPATH] [--database-path FILEPATH] \n                        [--socket-path FILEPATH] \n                        [--byron-delegation-certificate FILEPATH] \n                        [--byron-signing-key FILEPATH] \n                        [--shelley-kes-key FILEPATH] \n                        [--shelley-vrf-key FILEPATH] \n                        [--shelley-operational-certificate FILEPATH] \n                        [--bulk-credentials-file FILEPATH] [--host-addr IPV4] \n                        [--host-ipv6-addr IPV6] [--port PORT] \n                        [--config NODE-CONFIGURATION] [--validate-db]\n  Run the node.\n\nAvailable options:\n  --topology FILEPATH      The path to a file describing the topology.\n  --database-path FILEPATH Directory where the state is stored.\n  --socket-path FILEPATH   Path to a cardano-node socket\n  --byron-delegation-certificate FILEPATH\n                           Path to the delegation certificate.\n  --byron-signing-key FILEPATH\n                           Path to the Byron signing key.\n  --shelley-kes-key FILEPATH\n                           Path to the KES signing key.\n  --shelley-vrf-key FILEPATH\n                           Path to the VRF signing key.\n  --shelley-operational-certificate FILEPATH\n                           Path to the delegation certificate.\n  --bulk-credentials-file FILEPATH\n                           Path to the bulk pool credentials file.\n  --host-addr IPV4         An optional ipv4 address\n  --host-ipv6-addr IPV6    An optional ipv6 address\n  --port PORT              The port number\n  --config NODE-CONFIGURATION\n                           Configuration file for the cardano-node\n  --validate-db            Validate all on-disk database files\n  --shutdown-ipc FD        Shut down the process when this inherited FD reaches\n                           EOF\n  --shutdown-on-slot-synced SLOT\n                           Shut down the process after ChainDB is synced up to\n                           the specified slot\n  -h,--help                Show this help text\n")),(0,r.kt)("h3",{id:"cardano-node-parameters"},"cardano-node parameters"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In this section, we will use the path ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/user/cardano")," to store all the ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," related files as an example, and please replace it with the directory you have chosen to store the files."))),(0,r.kt)("p",null,"We will focus on six key command-line parameters for running a node: "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"--topology")),": This requires the path of the ",(0,r.kt)("inlineCode",{parentName:"p"},"topology.json")," file that you have downloaded as instructed ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/running-cardano#configuration-files"},"above"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For example, If you have downloaded the ",(0,r.kt)("inlineCode",{parentName:"p"},"topology.json")," file to the path ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/user/cardano/topology.json"),", then the argument would be something like this:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--topology /home/user/cardano/topology.json\n"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"--database-path")),": This expects the path to a directory where we will store the actual blockchain data like ",(0,r.kt)("strong",{parentName:"p"},"blocks"),", ",(0,r.kt)("strong",{parentName:"p"},"transactions"),", ",(0,r.kt)("strong",{parentName:"p"},"metadata"),", and other data type that people stored in the ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," blockchain. We explore how we can query those kinds of data in the cardano-db-sync section. ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"@TODO: link to the cardano-db-sync section."))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For example, if we decide that all files required by ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," will be in the path ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/user/cardano/"),". Then we could create a database directory like this, ",(0,r.kt)("inlineCode",{parentName:"p"},"mkdir -p /home/user/cardano/db"),".\nThe directory structure would then be something like this:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"/home/user/cardano/\n\u251c\u2500\u2500 db\n\u251c\u2500\u2500 testnet-alonzo-genesis.json\n\u251c\u2500\u2500 testnet-byron-genesis.json\n\u251c\u2500\u2500 testnet-config.json\n\u251c\u2500\u2500 testnet-shelley-genesis.json\n\u2514\u2500\u2500 testnet-topology.json\n1 directory, 4 files\n")),(0,r.kt)("p",{parentName:"blockquote"},"As you may have noticed, we are planning to run a ",(0,r.kt)("inlineCode",{parentName:"p"},"testnet")," node in this example and have downloaded the configuration files into the ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/user/cardano/")," directory. We also see that we have created the ",(0,r.kt)("inlineCode",{parentName:"p"},"db")," directory inside ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/user/cardano/")," successfully. The argument would look something like this: "),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--database-path /home/user/cardano/db\n")),(0,r.kt)("p",{parentName:"blockquote"},"Please download and move the configuration files to your Cardano directory as shown above to continue following this guide.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"--socket-path")),": This expects the path to the ",(0,r.kt)("inlineCode",{parentName:"p"},"unix socket")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"named pipe")," path that the ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," will use for ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Inter-process_communication"},"IPC (Inter-Process-Communication)"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," uses ",(0,r.kt)("strong",{parentName:"p"},"IPC (Inter-Process-Communication)")," for communicating with other ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," components like ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-wallet"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-db-sync"),". In ",(0,r.kt)("strong",{parentName:"p"},"Linux")," and ",(0,r.kt)("strong",{parentName:"p"},"MacOS")," it uses something called ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Unix_domain_socket"},"unix sockets")," and ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows/win32/ipc/named-pipes"},"Named Pipes")," in ",(0,r.kt)("strong",{parentName:"p"},"Windows"),"."),(0,r.kt)("p",{parentName:"blockquote"},"Here is an example ",(0,r.kt)("inlineCode",{parentName:"p"},"--socket-path")," argument for ",(0,r.kt)("strong",{parentName:"p"},"Linux"),":"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--socket-path /home/user/cardano/db/node.socket\n")),(0,r.kt)("p",{parentName:"blockquote"},"As you can see, the argument points to a file since ",(0,r.kt)("strong",{parentName:"p"},"unix sockets")," are represented as files (like everything else in ",(0,r.kt)("strong",{parentName:"p"},"Linux"),"). In this case, we put the socket file in the ",(0,r.kt)("inlineCode",{parentName:"p"},"db")," directory that we have just created before."),(0,r.kt)("p",{parentName:"blockquote"},"In ",(0,r.kt)("strong",{parentName:"p"},"Windows"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"--socket-path")," argument would look something like this:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},'--socket-path "\\\\\\\\.\\\\pipe\\\\cardano-node-testnet"\n')),(0,r.kt)("p",{parentName:"blockquote"},"As you may notice, it's like a network ",(0,r.kt)("inlineCode",{parentName:"p"},"URI")," or a network ",(0,r.kt)("inlineCode",{parentName:"p"},"Path")," than a file. It is a crucial difference that you will have to be aware of depending on your operating system. You can replace the string ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node-testnet")," in the argument with whatever you like. This example path is used in the ",(0,r.kt)("a",{parentName:"p",href:"https://daedaluswallet.io"},"Daedalus Testnet Wallet")," for ",(0,r.kt)("strong",{parentName:"p"},"Windows"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"--host-addr")),": This expects the ",(0,r.kt)("inlineCode",{parentName:"p"},"IP Address")," of the machine that ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," will be running. Other nodes will use this address in their ",(0,r.kt)("inlineCode",{parentName:"p"},"topology.json")," file to connect to your node if you are planning to run it as a ",(0,r.kt)("inlineCode",{parentName:"p"},"relay")," node."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Here is an example ",(0,r.kt)("inlineCode",{parentName:"p"},"--host-addr")," argument:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--host-addr 192.168.0.1\n")),(0,r.kt)("p",{parentName:"blockquote"},"In this case, we expect nodes in your ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Local_area_network"},"LAN (Local Area Network)")," to connect via ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.0.1"),", assuming that the ",(0,r.kt)("inlineCode",{parentName:"p"},"IP Address")," of the machine ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," is running on; replace it with your real ",(0,r.kt)("inlineCode",{parentName:"p"},"IP Address"),". If you don't expect or need external nodes to connect to your node, you can use the loopback address ",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),". If you have multiple network interfaces and unsure what to use, you can simply use ",(0,r.kt)("inlineCode",{parentName:"p"},"0.0.0.0")," to accept connections from any network interface.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"--port")),": In conjunction with the ",(0,r.kt)("inlineCode",{parentName:"p"},"IP Address"),", we will also set the ",(0,r.kt)("inlineCode",{parentName:"p"},"port")," that your ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," will use for listening to any incoming connection."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Here is an example ",(0,r.kt)("inlineCode",{parentName:"p"},"--port")," argument:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--port 1337\n")),(0,r.kt)("p",{parentName:"blockquote"},"You can choose whatever ",(0,r.kt)("inlineCode",{parentName:"p"},"port")," number you like, but it is recommended to use ",(0,r.kt)("inlineCode",{parentName:"p"},"port")," numbers ",(0,r.kt)("inlineCode",{parentName:"p"},"1024")," and above. See ",(0,r.kt)("a",{parentName:"p",href:"https://www.sciencedirect.com/topics/computer-science/registered-port"},"Registered Port")," for more information.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"--config")),": This expects the path to the main configuration file that we have downloaded previously."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Here is an example ",(0,r.kt)("inlineCode",{parentName:"p"},"--config")," argument:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--config /home/user/cardano/testnet-config.json\n")),(0,r.kt)("p",{parentName:"blockquote"},"Please make sure that the ",(0,r.kt)("inlineCode",{parentName:"p"},"alonzo-genesis.json"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"byron-genesis.json")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"shelley-genesis.json")," are in the same directory as the ",(0,r.kt)("inlineCode",{parentName:"p"},"config.json"),".")),(0,r.kt)("p",null,"Here is a realistic example for running ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cardano-node run \\\n--config /home/user/cardano/testnet-config.json \\\n--database-path /home/user/cardano/db/ \\\n--socket-path /home/user/cardano/db/node.socket \\\n--host-addr 127.0.0.1 \\\n--port 1337 \\\n--topology /home/user/cardano/testnet-topology.json\n")),(0,r.kt)("p",null,"If you have everything set correctly, you should see something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'Listening on http://127.0.0.1:12798\n[cardano.node.networkMagic:Notice:5] [2021-05-20 12:17:10.02 UTC] NetworkMagic 1097911063\n[cardano.node.basicInfo.protocol:Notice:5] [2021-05-20 12:17:10.02 UTC] Byron; Shelley\n[cardano.node.basicInfo.version:Notice:5] [2021-05-20 12:17:10.02 UTC] 1.27.0\n[cardano.node.basicInfo.commit:Notice:5] [2021-05-20 12:17:10.02 UTC] 9a7331cce5e8bc0ea9c6bfa1c28773f4c5a7000f\n[cardano.node.basicInfo.nodeStartTime:Notice:5] [2021-05-20 12:17:10.02 UTC] 2021-05-20 12:17:10.024924 UTC\n[cardano.node.basicInfo.systemStartTime:Notice:5] [2021-05-20 12:17:10.02 UTC] 2019-07-24 20:20:16 UTC\n[cardano.node.basicInfo.slotLengthByron:Notice:5] [2021-05-20 12:17:10.02 UTC] 20s\n[cardano.node.basicInfo.epochLengthByron:Notice:5] [2021-05-20 12:17:10.02 UTC] 21600\n[cardano.node.basicInfo.slotLengthShelley:Notice:5] [2021-05-20 12:17:10.02 UTC] 1s\n[cardano.node.basicInfo.epochLengthShelley:Notice:5] [2021-05-20 12:17:10.02 UTC] 432000\n[cardano.node.basicInfo.slotsPerKESPeriodShelley:Notice:5] [2021-05-20 12:17:10.02 UTC] 129600\n[cardano.node.basicInfo.slotLengthAllegra:Notice:5] [2021-05-20 12:17:10.02 UTC] 1s\n[cardano.node.basicInfo.epochLengthAllegra:Notice:5] [2021-05-20 12:17:10.02 UTC] 432000\n[cardano.node.basicInfo.slotsPerKESPeriodAllegra:Notice:5] [2021-05-20 12:17:10.02 UTC] 129600\n[cardano.node.basicInfo.slotLengthMary:Notice:5] [2021-05-20 12:17:10.02 UTC] 1s\n[cardano.node.basicInfo.epochLengthMary:Notice:5] [2021-05-20 12:17:10.02 UTC] 432000\n[cardano.node.basicInfo.slotsPerKESPeriodMary:Notice:5] [2021-05-20 12:17:10.02 UTC] 129600\n[cardano.node.addresses:Notice:5] [2021-05-20 12:17:10.05 UTC] [SocketInfo 0.0.0.0:9999,SocketInfo [::]:9999]\n[cardano.node.diffusion-mode:Notice:5] [2021-05-20 12:17:10.05 UTC] InitiatorAndResponderDiffusionMode\n[cardano.node.dns-producers:Notice:5] [2021-05-20 12:17:10.05 UTC] [DnsSubscriptionTarget {dstDomain = "relays-new.cardano-testnet.iohkdev.io", dstPort = 3001, dstValency = 2}]\n[cardano.node.ip-producers:Notice:5] [2021-05-20 12:17:10.05 UTC] IPSubscriptionTarget {ispIps = [], ispValency = 0}\n[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.06 UTC] Opened imm db with immutable tip at genesis (origin) and chunk 0\n[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.06 UTC] Opened vol db\n[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.06 UTC] Replaying ledger from genesis\n[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.07 UTC] Opened lgr db\n[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.07 UTC] Opened db with immutable tip at genesis (origin) and tip genesis (origin)\n[cardano.node.ChainDB:Notice:33] [2021-05-20 12:17:10.08 UTC] Chain extended, new tip: 1e64e74bd7ac76d6806480a28017deb0aedd356fb61844ec95c429ae2f30c7c3 at slot 0\n')),(0,r.kt)("p",null,"Syncing the blockchain from zero can take a while. Please be patient. If you want to stop syncing, you can do so by pressing ",(0,r.kt)("inlineCode",{parentName:"p"},"CTRL")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"C")," while in the terminal. Rerunning the ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node run")," command with the correct parameters will resume syncing the blockchain."),(0,r.kt)("h3",{id:"querying-the-cardano-blockchain"},"Querying the Cardano Blockchain"),(0,r.kt)("p",null,"Now that we have ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," running and syncing, we can test it out by querying the blockchain tip data; which is the current point your local node is synced. To do this, we use the ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli")," command-line application."),(0,r.kt)("p",null,"But before we can do that, ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli")," and other ",(0,r.kt)("strong",{parentName:"p"},"Cardano")," software components need to know where the node socket file is located. We saved it to the path ",(0,r.kt)("inlineCode",{parentName:"p"},"/home/user/cardano/db/node.socket")," in the previous example. The components read the shell environment variable ",(0,r.kt)("inlineCode",{parentName:"p"},"CARDANO_NODE_SOCKET_PATH")," to find this."),(0,r.kt)("p",null,"So we will set that in ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.bashrc")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.zshrc"),", depending on which shell application that you use. In Windows, you can follow this guide: ",(0,r.kt)("a",{parentName:"p",href:"https://phoenixnap.com/kb/windows-set-environment-variable"},"How to Set Environment Variable in Windows"),"."),(0,r.kt)("p",null,"Add this line to the bottom of your shell profile (",(0,r.kt)("strong",{parentName:"p"},"MacOS")," and ",(0,r.kt)("strong",{parentName:"p"},"Linux"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'export CARDANO_NODE_SOCKET_PATH="/home/user/cardano/db/node.socket"\n')),(0,r.kt)("p",null,"Once saved, reload your shell/terminal for changes to take effect."),(0,r.kt)("p",null,"Finally, we can now test querying the blockchain tip of our ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"First, run ",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-node")," in a separate terminal for it to start syncing (if not already)."),(0,r.kt)("li",{parentName:"ul"},"Open another terminal and run the following command ",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-cli query tip --testnet-magic 1097911063"),".",(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"You should see something like this:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "blockNo": 2598870,\n    "headerHash": "e5be38153db4dc639134969e6449f37e105e0c5228f828f76a885968b4423aaf",\n    "slotNo": 27149964\n}\n'))))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We include ",(0,r.kt)("inlineCode",{parentName:"p"},"--testnet-magic <NetworkMagic>")," in the parameter for ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli query tip")," because we are using a ",(0,r.kt)("inlineCode",{parentName:"p"},"testnet")," node. If you intend to query ",(0,r.kt)("inlineCode",{parentName:"p"},"mainnet")," instead, please use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--mainnet")," parameter  and make sure your node is connected to the ",(0,r.kt)("inlineCode",{parentName:"p"},"mainnet")," network."))),(0,r.kt)("p",null,"What you see here is the local tip data of your node. This case, means that you are synced up to ",(0,r.kt)("inlineCode",{parentName:"p"},"blockNo: 2598870")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"slotNo: 27149964"),"."),(0,r.kt)("p",null,"To know whether you are fully synced or not, you can check the ",(0,r.kt)("strong",{parentName:"p"},"Cardano Blockchain Explorer")," of the relevant network:"),(0,r.kt)("h4",{id:"mainnet-explorer"},"Mainnet Explorer"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://explorer.cardano.org"},"https://explorer.cardano.org")),(0,r.kt)("h4",{id:"testnet-explorer"},"Testnet Explorer"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://explorer.cardano-testnet.iohkdev.io"},"https://explorer.cardano-testnet.iohkdev.io")),(0,r.kt)("p",null,"Scroll down to the ",(0,r.kt)("strong",{parentName:"p"},"Latest Blocks")," section, and you can find the latest network tip."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:t(1627).Z})),(0,r.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Before making any transactions, make sure you are fully synced to the blockchain network."))),(0,r.kt)("p",null,"Congratulations, you are now ready to explore the world of ",(0,r.kt)("strong",{parentName:"p"},"Cardano"),"! \ud83c\udf89\ud83c\udf89\ud83c\udf89"))}c.isMDXComponent=!0},1627:function(e,n,t){"use strict";n.Z=t.p+"assets/images/latest-block-eb6d30aa2616b95b4038d3e027297adf.png"}}]);